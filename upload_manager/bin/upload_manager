#!/usr/bin/env ruby
ENV['BUNDLE_GEMFILE'] ||= File.expand_path('../../Gemfile', __FILE__)

require 'rubygems'
require 'bundler/setup'

$LOAD_PATH.unshift(File.expand_path('../../lib', __FILE__))

require 'vcap/common'
require 'vcap/upload_manager'

config_file = VCAP::UploadManager::Config::DEFAULT_CONFIG_PATH

OptionParser.new do |op|
  op.on('-c', '--config [FILENAME]', 'Config filename') do |val|
    config_file = val
  end
end.parse!

VCAP::UploadManager.init(config_file)
VCAP::UploadManager.start_server!
