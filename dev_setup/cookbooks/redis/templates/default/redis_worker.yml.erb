---
service_name: redis
base_dir: /var/vcap/services/redis/instances
snapshots_base_dir: <%= node[:snapshot][:dir]%>
serialization_base_dir: <%= node[:snapshot][:dir] %>
local_db: sqlite3:/var/vcap/services/redis/redis_node.db
tmp_dir: <%= node[:service_lifecycle][:tmp_dir]|| "/var/vcap/snapshot/tmp"%>
resque:
  host: <%= node[:service_redis][:host]%>
  port: <%= node[:service_redis][:port]%>
  password: <%= node[:service_redis][:password] %>
  expire: <%= node[:service_redis][:expire]%>
logging:
  level: debug
index: <%= node[:redis_node][:index] %>
node_id: <%= "redis_node_#{node[:redis_node][:index]}" %>
max_memory: <%= node[:redis_node][:max_memory] %>
memory_overhead: 20

download_url_template: "http://service-serialization.<%= node[:deployment][:domain] %>/serialized/%{service}/%{name}/snapshots/%{snapshot_id}?token=%{token}"
<%if node[:service_lifecycle][:enable]%>
snapshot_quota: <%= node[:mysql_node][:snapshot_quota] || "5" %>
<%else%>
snapshot_quota: 0
<%end%>
serialization:
  max_download_size_mb: <%= node[:service_lifecycle][:serialization_max_download_size]|| 10 %>

command_rename_prefix: protect-command-prefix
gzip_bin: /bin/gzip
image_dir: /var/vcap/store/redis_image
service_log_dir: /var/vcap/sys/log/redis

redis_server_path:
  "<%= node[:redis][:default_version] %>": "<%= node[:redis][:path] %>/<%= node[:redis][:default_version] %>/bin/redis-server"
service_common_dir: "<%= node[:redis][:path] %>/common"
service_bin_dir:
  "<%= node[:redis][:default_version] %>": "<%= node[:redis][:path] %>/<%= node[:redis][:default_version] %>"

filesystem_quota: false
persistent: false
service_start_timeout: 3
