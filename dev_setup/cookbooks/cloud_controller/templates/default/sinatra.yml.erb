---
name: "sinatra"
runtimes:
  - "ruby18":
      version: "1.8.7" # FIXME change to 1.8.7-p334
      description: "Ruby 1.8.7"
      executable: "<%= File.join(node[:ruby18][:path], "bin", "ruby") %>"
      default: true
      environment:
       rails_env: "production"
       bundle_gemfile:
       rack_env: "production"
  - "ruby19":
      version: "1.9.2p180"
      description: "Ruby 1.9.2"
      executable: "<%= File.join(node[:ruby][:path], "bin", "ruby") %>"
      environment:
       rails_env: "production"
       bundle_gemfile:
       rack_env: "production"
  - "jruby18":
      version: "<%= node[:jruby][:ruby_version] %>"
      description: "JRuby <%= node[:jruby][:version] %>"
      executable: "<%= File.join(node[:jruby][:path], "bin", "jruby") %>"
      ruby_engine: "<%= node[:jruby][:ruby_engine] %>"
      library_version: "<%= node[:jruby][:library_version] %>"
      environment:
       rails_env: "production"
       bundle_gemfile:
       rack_env: "production"
  - "jruby19":
      version: "<%= node[:jruby19][:ruby_version] %>"
      description: "JRuby <%= node[:jruby][:version] %> (Ruby <%= node[:jruby19][:ruby_mode] %> mode)"
      executable: "<%= File.join(node[:jruby][:path], "bin", node[:jruby19][:executable_file]) %>"
      ruby_engine: "<%= node[:jruby][:ruby_engine] %>"
      library_version: "<%= node[:jruby19][:library_version] %>"
      environment:
       rails_env: "production"
       bundle_gemfile:
       rack_env: "production"
app_servers:
  - "thin":
      description: "Thin"
      executable: false # determined during staging
      default: true
detection:
  - "*.rb": "require 'sinatra'|require \"sinatra\"" # .rb files in the root dir containing a require?
  - "config/environment.rb": false # and config/environment.rb must not exist
staged_services:
  - "name": "mysql"
    "version": "*"
  - "name": "postgresql"
    "version": "*"
  - "name": "redis"
    "version": "2"
