---
capacity: 100
plan: free
local_db: sqlite3:/var/vcap/services/rabbit/rabbit_node.db
base_dir: /var/vcap/services/rabbit/instances
mbus: nats://<%= node[:nats_server][:user] %>:<%= node[:nats_server][:password] %>@<%= node[:nats_server][:host] %>:<%= node[:nats_server][:port] %>/
index: <%= node[:rabbitmq_node][:index] %>
logging:
  level: debug
pid: /var/vcap/sys/run/rabbit_node.pid
node_id: <%= "rabbit_node_free_#{node[:rabbitmq_node][:index]}" %>
supported_versions: <%= "['#{node[:rabbitmq][:supported_versions].keys.join("', '")}']"%>
default_version: "<%= node[:rabbitmq][:default_version] %>"
op_time_limit: <%= node[:rabbitmq_node][:op_time_limit] %>
migration_nfs: /var/vcap/services_migration_rabbit
port_range:
  first: 10001
  last: 20000
admin_port_range:
  first: 20001
  last: 30000
max_clients: 1000
rabbitmq_log_dir: /var/vcap/services/rabbit/logs
rabbitmq_server: <%= node[:rabbitmq][:path] %>
rabbitmq_start_timeout: <%= node[:rabbitmq_node][:rabbitmq_start_timeout] %>
rabbit:
  '2.4':
    config_template: ../../../resources/rabbitmq24.config.erb
  '2.8':
    config_template: ../../../resources/rabbitmq28.config.erb
    disk_free_limit: 13421772

image_dir: /var/vcap/store/rabbitmq_image
max_disk: 2048
vm_memory_high_watermark: 0.0793
bandwidth_per_second: 0.09
service_log_dir: /var/vcap/sys/service-log/rabbitmq

m_interval: 10
z_interval: 30
max_nats_payload: 1048577
fqdn_hosts: false
filesystem_quota: true

service_bin_dir:
  '2.4': "<%= node[:rabbitmq][:path] %>/2.4"
  '2.8': "<%= node[:rabbitmq][:path] %>/2.8"
  erlang: "<%= node[:rabbitmq][:path] %>/erlang"

service_common_dir: <%= node[:rabbitmq][:path] %>/common
