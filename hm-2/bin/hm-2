#!/usr/bin/env ruby

home = File.join(File.dirname(__FILE__),'..')
ENV['BUNDLE_GEMFILE'] = "#{home}/Gemfile"

require 'bundler/setup'
require File.join(home, 'lib','hm-2')

VCAP::Logging.setup_from_config({'level' => ENV['LOG_LEVEL'] || 'info'})

hm2 = HM2::Manager.new() #TODO: whence the config?

trap('INT') { hm2.shutdown }
trap('SIGTERM') { hm2.shutdown }

hm2.start
